---
layout:     post
title:     day_04
subtitle:  NTFS安全权限、文件共享服务器
date:       2020-4-21
author:     One-Punch-Man
header-img: "img/man-6.jpg"
catalog: true
tags: 
     - 网络安全
     - 千锋教育
---

# NTFS权限

## 概述

通过设置不同的NTFS权限，可以实现不同的用户访问不同的对象的权限。用户只能根据分配的权限对对象进行权限以内的操作。

### 文件系统

文件系统是在存储设备上组织文件的方法。严格地说，文件系统是一套实现了数据的存储、分级组织、访问和获取等操作的抽象数据类型。

#### 常用的文件系统

- `NTFS`:现在windows下主流的文件系统。
- `FAT`：windows下的一种文件系统。
- `EXT`：linux下的一种文件系统。

## 特点

- 可以提高读写性能。
- 可靠性。
  - 支持加密文件系统
  - **访问控制列表(ACL)**
- 磁盘利用率高
  - 支持压缩
  - 支持磁盘配额
- 支持存储单个文件大于4G

## NTFS权限修改

### 文件权限

![image-20200515014044745](\img\day_04_01.png)

### 文件夹权限

![image-20200515014933898](\img\day_04_02.png)

### 取消权限继承

只有取消权限继承，才可以对该文件或者文件夹进行文件权限操作。

1. 右键点击文件或文件夹；
2. 点击安全；
3. 点击高级；
4. 把第一个`√`点击去掉；
5. 在弹出的对话框中点击**复制**。

### 强制继承

使用了强制继承后，文件夹里面的文件及文件夹都会应用次文件夹的权限设置。

1. 右键点击文件或文件夹；
2. 点击安全；
3. 点击高级；
4. 在第二个小框框打上`√`。

### 文件的复制和移动

- **同**一个分区进行文件的**复制**，文件的权限**会**被目标文件夹的权限所**覆盖**。
- **不同**一个分区进行文件的**复制**，文件的权限**会**被目标文件夹的权限所**覆盖**。
- **同**一个分区进行文件的**移动**，文件的权限**不会**被目标文件夹的权限所**覆盖**。
- **不同**一个分区进行文件的**移动**，文件的权限**会**被目标文件夹的权限所**覆盖**。

### 复杂的情况

- 当用户是属于多个组的时候，这个用户的权限是多个组权限的**并集**。
- 当用户属于多个组的时候，并且设置了拒绝权限，那么**拒绝权限是第一优先级**。
- `administrator`可以把任意一个文件夹或者文件的所有者强制设置为`administrator`，并且删除原有使用者的权限设置。

# 共享服务器

## 创建共享文件夹

1. 右键点击需要共享的文件夹；
2. 点击属性 -> 共享 ->点击共享此文件夹 ->设置共享名；（在输入的名字后面加上`$`，表示该文件设置为隐藏文件或者文件夹）
3. 点击权限 ->选中`everyone`，点击完全控制。

由于在远程连接时，文件的权限不仅受共享权限的限制，还受`NTFS`权限的限制，而且取两者的交集；所以建议设置共享权限时，统一给`everyone`设置为**完全控制**，再到`NTFS`权限中设置具体的访问权限。

## 访问共享文件夹

1. 使用`win`+`r`快捷键打开运行窗口；
2. 输入`\\远程服务器地址\共享名`。（如果是隐藏文件夹，需要在共享名后面加上`$`）

## 共享相关命令

- `net share`：查看本机的共享。
- `net share 共享名`：查看该共享的相关信息。
- `net share 共享名=共享文件(夹)路径`：创建共享。
- `net share 共享名 /del`：删除共享，但不能删除**默认共享**，只能删除自己创建的共享。

## 屏蔽共享服务

1. 使用`win`+`r`快捷键，打开运行窗口，输入`regedit`，打开注册表。

2. 百度搜索共享注册表的位置，找到相应的位置后，新建`DWORD`类型的`AutoShareServer`文件，值为`0`。

3. 打开`services.msc`，找到`server`服务，禁用且关闭。

   > `445端口`是负责提供局域网中的共享文件、打印机服务的端口。

